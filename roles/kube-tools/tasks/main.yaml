- name: check kubectl available
  stat:
    path: /usr/local/bin/kubectl
  register: kubectl_location
- name: install kubectl
  shell: "wget https://storage.googleapis.com/kubernetes-release/release/v1.9.0/bin/linux/amd64/kubectl -O /usr/local/bin/kubectl"
  when: kubectl_location.stat.exists == False
- name: set permissions on kubectl
  file:
    path: /usr/local/bin/kubectl
    mode: "0775"
- name: check kops version
  command: "kops version"
  register: kops_version
  ignore_errors: yes
  changed_when: False
- name: install kops
  shell: "wget https://github.com/kubernetes/kops/releases/download/1.8.1/kops-linux-amd64 -O /usr/local/bin/kops"
  when: kops_version.stdout != 'Version 1.8.1 (git-94ef202)'
- name: set permissions on kops
  file:
    path: /usr/local/bin/kops
    mode: "0775"
- name: check helm available
  stat: 
    path: /usr/local/bin/helm
  register: helm_location 
- name: install helm
  unarchive:
    src: https://storage.googleapis.com/kubernetes-helm/helm-v2.8.1-linux-amd64.tar.gz
    dest: /usr/local/bin/
    remote_src: yes
- name: set permissions on kops
  file:
    path: /usr/local/bin/kops
    mode: "0775"
